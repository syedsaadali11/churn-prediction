{% extends 'base.html' %}

{% block title %}Get Started | Analytics Pro{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-visual">
        <div class="gradient-background"></div>
        <div class="content-wrapper">
            <h1 class="brand-heading">Predict Churn</h1>
            <p class="visual-text">AI-Powered Customer Retention</p>
            <div class="animated-chart">
                <div class="chart-bar"></div>
                <div class="chart-bar delay-1"></div>
                <div class="chart-bar delay-2"></div>
            </div>
        </div>
    </div>

    <div class="auth-form">
        <div class="form-header">
            <h2 class="form-title">Start Predicting Now</h2>
            <p class="form-subtitle">Create your free account in 30 seconds</p>
        </div>

        {% if messages %}
        <div class="alert-container">
            {% for message in messages %}
            <div class="alert {{ message.tags }} slide-in">
                <i class="alert-icon fas fa-{% if message.tags == 'error' %}exclamation-circle{% else %}check-circle{% endif %}"></i>
                <span>{{ message }}</span>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <form method="POST" class="modern-form">
            {% csrf_token %}
            
            <div class="input-field">
                <input type="text" id="username" name="username" required autocomplete="username">
                <label for="username">Username</label>
                <i class="input-icon fas fa-user-tag"></i>
                <div class="underline"></div>
            </div>

            <div class="input-field">
                <input type="email" id="email" name="email" required autocomplete="email">
                <label for="email">Work Email</label>
                <i class="input-icon fas fa-envelope"></i>
                <div class="underline"></div>
            </div>

            <div class="input-field">
                <input type="password" id="password1" name="password1" required autocomplete="new-password">
                <label for="password1">Password</label>
                <i class="input-icon fas fa-lock"></i>
                <div class="underline"></div>
                <div class="password-strength"></div>
                <button type="button" class="password-toggle">
                    <i class="fas fa-eye"></i>
                </button>
            </div>

            <div class="input-field">
                <input type="password" id="password2" name="password2" required autocomplete="new-password">
                <label for="password2">Confirm Password</label>
                <i class="input-icon fas fa-lock"></i>
                <div class="underline"></div>
            </div>

            <!-- Fixed Checkbox Section -->
            <div class="terms-container">
                <label class="custom-checkbox">
                    <input type="checkbox" required class="hidden-checkbox">
                    <span class="checkmark">
                        <svg class="check-icon" viewBox="0 0 12 9">
                            <path d="M1 4.5L4.5 8L11 1" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </span>
                    <span class="checkbox-label">I agree to the <a href="#terms">Terms</a> and <a href="#privacy">Privacy Policy</a></span>
                </label>
            </div>

            <button type="submit" class="auth-button">
                <span>Create Account</span>
                <i class="fas fa-arrow-right"></i>
            </button>

            <div class="auth-footer">
                <span>Already have an account?</span>
                <a href="{% url 'login' %}" class="auth-link">Sign In</a>
            </div>
        </form>

        <div class="social-auth">
            <p class="divider"><span>Or sign up with</span></p>
            <div class="social-buttons">
                <button class="social-button google">
                    <i class="fab fa-google"></i>
                </button>
                <button class="social-button microsoft">
                    <i class="fab fa-microsoft"></i>
                </button>
                <button class="social-button github">
                    <i class="fab fa-github"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --primary: #0066ff;
        --secondary: #00f7ff;
        --background: #0f172a;
        --surface: #1e293b;
        --text-primary: #f8fafc;
        --text-secondary: #94a3b8;
    }

    .auth-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        min-height: 100vh;
        background: var(--background);
    }

    .auth-visual {
        position: relative;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        overflow: hidden;
    }

    .gradient-background {
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
            from 180deg at 50% 50%,
            var(--primary) 0deg,
            var(--secondary) 180deg,
            var(--primary) 360deg
        );
        animation: rotate 20s linear infinite;
        opacity: 0.1;
    }

    .content-wrapper {
        position: relative;
        z-index: 2;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: var(--text-primary);
        padding: 2rem;
    }

    .brand-heading {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, var(--text-primary), var(--secondary));
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .visual-text {
        font-size: 1.2rem;
        letter-spacing: 0.1em;
        opacity: 0.8;
    }

    .animated-chart {
        margin-top: 3rem;
        width: 200px;
        height: 120px;
        display: flex;
        align-items: flex-end;
        gap: 8px;
    }

    .chart-bar {
        width: 40px;
        background: rgba(255,255,255,0.8);
        animation: barGrow 1.6s ease-in-out infinite;
    }

    .delay-1 { animation-delay: 0.4s; }
    .delay-2 { animation-delay: 0.8s; }

    .auth-form {
        padding: 4rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        background: var(--surface);
    }

    .form-header {
        margin-bottom: 3rem;
        text-align: center;
    }

    .form-title {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
    }

    .form-subtitle {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }

    .input-field {
        position: relative;
        margin-bottom: 2rem;
    }

    .input-field input {
        width: 100%;
        padding: 1rem 1rem 1rem 2.5rem;
        border: none;
        border-radius: 8px;
        background: rgba(255,255,255,0.05);
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .input-field input:focus {
        outline: none;
        background: rgba(255,255,255,0.08);
        box-shadow: 0 0 0 2px var(--primary);
    }

    .input-field label {
        position: absolute;
        left: 2.5rem;
        top: 1rem;
        color: var(--text-secondary);
        pointer-events: none;
        transition: all 0.3s ease;
    }

    .input-field input:focus ~ label,
    .input-field input:valid ~ label {
        transform: translateY(-1.5rem);
        font-size: 0.8rem;
        left: 1rem;
        color: var(--secondary);
    }

    .input-icon {
        position: absolute;
        left: 1rem;
        top: 1rem;
        color: var(--text-secondary);
    }

    .password-toggle {
        position: absolute;
        right: 1rem;
        top: 1rem;
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        transition: color 0.3s ease;
    }

    .password-toggle:hover {
        color: var(--secondary);
    }

    .password-strength {
        position: absolute;
        bottom: -6px;
        left: 0;
        height: 2px;
        background: var(--secondary);
        width: 0%;
        transition: width 0.3s ease;
    }

    /* Updated Checkbox Styles */
    .terms-container {
        margin: 2rem 0;
    }

    .custom-checkbox {
        display: flex;
        align-items: center;
        position: relative;
        cursor: pointer;
        padding-left: 32px;
        min-height: 24px;
    }

    .hidden-checkbox {
        position: absolute;
        opacity: 0;
        height: 0;
        width: 0;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
    }

    .checkmark {
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        height: 20px;
        width: 20px;
        background: rgba(255,255,255,0.05);
        border: 2px solid #334155;
        border-radius: 6px;
        transition: all 0.3s ease;
    }

    .check-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 14px;
        height: 14px;
        stroke: var(--secondary);
        opacity: 0;
        transition: opacity 0.2s ease;
    }

    .custom-checkbox input:checked ~ .checkmark .check-icon {
        opacity: 1;
    }

    .custom-checkbox input:checked ~ .checkmark {
        background: rgba(0, 247, 255, 0.1);
        border-color: var(--secondary);
    }

    .checkbox-label {
        margin-left: 12px;
        color: var(--text-secondary);
        font-size: 0.9rem;
    }

    .checkbox-label a {
        color: var(--secondary);
        text-decoration: none;
        transition: opacity 0.3s ease;
    }

    .checkbox-label a:hover {
        opacity: 0.8;
    }

    .auth-button {
        width: 100%;
        padding: 1rem;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        border: none;
        border-radius: 8px;
        color: var(--text-primary);
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .auth-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 231, 255, 0.2);
    }

    .social-auth {
        margin-top: 2rem;
    }

    .divider {
        color: var(--text-secondary);
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        margin: 1.5rem 0;
    }

    .divider::before,
    .divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: rgba(255,255,255,0.1);
    }

    .social-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
    }

    .social-button {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 8px;
        background: rgba(255,255,255,0.05);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .social-button:hover {
        background: rgba(255,255,255,0.1);
        color: var(--text-primary);
    }

    @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes barGrow {
        0%, 100% { height: 30%; }
        50% { height: 80%; }
    }

    @keyframes slide-in {
        from { transform: translateY(-20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    @media (max-width: 768px) {
        .auth-container {
            grid-template-columns: 1fr;
        }

        .auth-visual {
            display: none;
        }

        .auth-form {
            padding: 2rem;
        }
    }
    .auth-footer {
    text-align: center;
    margin-top: 1.5rem;
}

.auth-footer a {
    color: #13ddc2fe; /* Change this to your preferred color */
    font-weight: 600;
    text-decoration: none;
    transition: color 0.3s ease;
}

.auth-footer a:hover {
    color: #ffffff; /* Change this if you want a different hover color */
}

</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Password strength indicator
        const passwordInput = document.getElementById('password1');
        const strengthBar = document.querySelector('.password-strength');

        passwordInput.addEventListener('input', () => {
            const strength = Math.min(passwordInput.value.length / 12 * 100, 100);
            strengthBar.style.width = `${strength}%`;
            strengthBar.style.background = strength < 50 ? '#ff4d4d' : 
                                         strength < 75 ? '#ffb74d' : '#4dffb0';
        });

        // Password toggle
        document.querySelectorAll('.password-toggle').forEach(button => {
            button.addEventListener('click', (e) => {
                const input = e.currentTarget.parentElement.querySelector('input');
                const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
                input.setAttribute('type', type);
                e.currentTarget.innerHTML = type === 'password' ? 
                    '<i class="fas fa-eye"></i>' : 
                    '<i class="fas fa-eye-slash"></i>';
            });
        });

        // Input validation
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', () => {
                input.parentElement.classList.toggle('has-value', input.value.length > 0);
            });
        });

        // Checkbox initialization
        document.querySelectorAll('.custom-checkbox input').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const checkmark = checkbox.nextElementSibling;
                checkmark.classList.toggle('checked', checkbox.checked);
            });
        });
    });
</script>
{% endblock %}